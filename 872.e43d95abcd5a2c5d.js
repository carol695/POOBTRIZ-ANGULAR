"use strict";(self.webpackChunkFront_web=self.webpackChunkFront_web||[]).push([[872],{7872:(G,f,c)=>{c.r(f),c.d(f,{GameModule:()=>l});var a=c(6895),o=c(8256);class r{constructor(){}}r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"});var g=c(241),u=c(6167),_=c(7186),h=c(8235);function k(t,e){if(1&t&&(o.TgZ(0,"div",1)(1,"span"),o._UZ(2,"p-progressBar",2),o.TgZ(3,"strong"),o._uU(4),o.qZA()()()),2&t){const n=o.oxw();o.xp6(4),o.Oqu(n.message)}}class p{constructor(){this.blocked=!1}}p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-blocked"]],inputs:{blocked:"blocked",message:"message"},decls:1,vars:1,consts:[["class","block",4,"ngIf"],[1,"block"],["mode","indeterminate"]],template:function(e,n){1&e&&o.YNc(0,k,5,1,"div",0),2&e&&o.Q6J("ngIf",n.blocked)},dependencies:[a.O5,h.k],styles:[".block[_ngcontent-%COMP%]{margin-top:15%;margin-inline:15%}.block[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{font-size:30px;margin-inline:13%}"]});class d{}function C(t,e){if(1&t&&(o.TgZ(0,"span"),o._UZ(1,"app-block",3),o.qZA()),2&t){const n=e.$implicit,s=e.index,B=o.oxw().index,P=o.oxw(2);o.xp6(1),o.Q6J("color",n)("reborde",P.tablero.bgReborde[B][s])}}function x(t,e){if(1&t&&(o.TgZ(0,"span"),o.YNc(1,C,2,2,"span",2),o.qZA()),2&t){const n=e.$implicit;o.xp6(1),o.Q6J("ngForOf",n)}}function y(t,e){if(1&t&&(o.TgZ(0,"div",1),o.YNc(1,x,2,1,"span",2),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngForOf",n.tablero.background)}}d.\u0275fac=function(e){return new(e||d)},d.\u0275cmp=o.Xpm({type:d,selectors:[["app-block"]],inputs:{color:"color",reborde:"reborde"},decls:1,vars:4,consts:[[1,"block"]],template:function(e,n){1&e&&o._UZ(0,"div",0),2&e&&o.Udp("background",n.color)("border-color",n.reborde)},styles:[".block[_ngcontent-%COMP%]{border:2.5px solid;width:50px;height:50px}"]});class m{constructor(){this.size={rows:20,cols:10}}}function w(t,e){if(1&t&&o._UZ(0,"app-board",5),2&t){const n=o.oxw(2);o.Q6J("tablero",n.tablero)}}function v(t,e){if(1&t&&(o.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th"),o._uU(4,"Puntaje"),o.qZA()()(),o.TgZ(5,"tbody")(6,"tr")(7,"td"),o._uU(8),o.qZA()()()()),2&t){const n=o.oxw(2);o.xp6(8),o.Oqu(n.lobby.players[0].tablero.puntuacion)}}function O(t,e){1&t&&(o.TgZ(0,"span"),o._uU(1,"(T\xfa)"),o.qZA())}function Z(t,e){if(1&t&&(o.TgZ(0,"tr")(1,"td"),o._uU(2),o.YNc(3,O,2,0,"span",8),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA()()),2&t){const n=e.$implicit,s=o.oxw(3);o.xp6(2),o.hij("",n.nick," "),o.xp6(1),o.Q6J("ngIf",n.nick==s.nick),o.xp6(2),o.Oqu(n.tablero.puntuacion)}}function T(t,e){if(1&t&&(o.TgZ(0,"table",6)(1,"thead")(2,"tr")(3,"th"),o._uU(4,"Usuario"),o.qZA(),o.TgZ(5,"th"),o._uU(6,"Puntuaci\xf3n"),o.qZA()()(),o.TgZ(7,"tbody"),o.YNc(8,Z,6,3,"tr",7),o.qZA()()),2&t){const n=o.oxw(2);o.xp6(8),o.Q6J("ngForOf",n.lobby.players)}}function M(t,e){if(1&t&&(o.TgZ(0,"div",2),o.YNc(1,w,1,1,"app-board",3),o.YNc(2,v,9,1,"table",4),o.YNc(3,T,9,1,"table",4),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.tablero),o.xp6(1),o.Q6J("ngIf",1==n.lobby.players.length),o.xp6(1),o.Q6J("ngIf",n.lobby.players.length>1)}}m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-board"]],inputs:{size:"size",tablero:"tablero"},decls:1,vars:1,consts:[["class","tetris-board",4,"ngIf"],[1,"tetris-board"],[4,"ngFor","ngForOf"],[1,"bloque",3,"color","reborde"]],template:function(e,n){1&e&&o.YNc(0,y,2,1,"div",0),2&e&&o.Q6J("ngIf",n.tablero)},dependencies:[a.sg,a.O5,d],styles:[".tetris-board[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:flex;width:30%}"]});class b{constructor(e){this.route=e,this.blockedDocument=!0,this.nick=localStorage.getItem("nick")}ngOnInit(){this.route.paramMap.subscribe(e=>{this.instanceWS(e.get("id"))}),document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":this.ws.send("up");break;case"ArrowDown":this.ws.send("down");break;case"ArrowLeft":this.ws.send("left");break;case"ArrowRight":this.ws.send("right")}})}instanceWS(e){this.ws&&this.ws.close(),this.ws=new _.WebsocketBuilder(`ws://localhost:8081/game/${this.nick}/${e}`).onOpen((n,s)=>{console.log("ABIERTO")}).onClose((n,s)=>{console.log("CLOSED")}).onError((n,s)=>{console.log("error")}).onMessage((n,s)=>{this.onMessage(JSON.parse(s.data))}).build()}onMessage(e){this.lobby=e,this.lobby.estado.toString()==u.G[u.G.RUNNING]&&(this.blockedDocument=!1),this.tablero=this.lobby.players.find(n=>n.nick==this.nick)?.tablero}}b.\u0275fac=function(e){return new(e||b)(o.Y36(g.gz))},b.\u0275cmp=o.Xpm({type:b,selectors:[["app-game"]],decls:2,vars:2,consts:[["message","Esperando a que se conecten todos los jugadores",3,"blocked"],["class","container",4,"ngIf"],[1,"container"],[3,"tablero",4,"ngIf"],["class","table-score",4,"ngIf"],[3,"tablero"],[1,"table-score"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,n){1&e&&(o._UZ(0,"app-blocked",0),o.YNc(1,M,4,3,"div",1)),2&e&&(o.Q6J("blocked",n.blockedDocument),o.xp6(1),o.Q6J("ngIf",n.lobby&&!n.blockedDocument))},dependencies:[a.sg,a.O5,p,m],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin-bottom:1rem;color:#212529;font-size:.875rem;background-color:#fff;border:1px solid #dee2e6}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:middle;border-top:1px solid #dee2e6}th[_ngcontent-%COMP%]{font-weight:1000;background-color:#f8f9fa;border-bottom:2px solid #dee2e6}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even){background-color:#f2f2f2}.table-score[_ngcontent-%COMP%]{margin-top:2rem}.table-score[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(1){width:70%}.table-score[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-of-type(2){width:30%}"]});class i{}i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[g.Bz.forChild([{path:":id",component:b}]),g.Bz]});var A=c(4989);class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({providers:[r],imports:[a.ez,i,A.m]})}}]);